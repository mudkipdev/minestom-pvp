# Fix: Add Bypasses Cooldown Check for Invulnerability Frames

**Commit Hash:** a008662
**File Modified:** `src/main/java/io/github/togar2/pvp/damage/DamageTypeInfo.java` and `src/main/java/io/github/togar2/pvp/feature/damage/VanillaDamageFeature.java`
**Severity:** HIGH

## Issue

Certain damage types (fire, wither, drowning, cramming, in_wall) should bypass invulnerability frames, but the code only checked for `outOfWorld` damage types.

### Changes Made

1. **Added new field to DamageTypeInfo:**
   - `bypassesCooldown` - Indicates damage types that should bypass invulnerability frames

2. **Updated DamageTypeInfo.java:**
   - Added `bypassesCooldown` field to record
   - Updated all fire damage types to have `bypassesCooldown(true)`
   - Added builder method `bypassesCooldown(boolean)`

3. **Updated VanillaDamageFeature.java:**
   - Added check: `if (!typeInfo.bypassesCooldown() && entity.getAliveTicks() - newDamageTime < 0)`

## Vanilla Reference

**Reference File:** `/reference/minecraft/net/minecraft/world/damagesource/CombatRules.java` and `/reference/minecraft/net/minecraft/world/entity/LivingEntity.java`

Vanilla damage types that bypass cooldown (invulnerability frames):
- `IN_FIRE` - Burns from fire blocks
- `ON_FIRE` - Entity on fire status
- `LAVA` - Lava damage
- `HOT_FLOOR` - Magma block damage
- `IN_WALL` - Suffocation damage
- And others...

These damages should be applied even if the entity was recently damaged.

## Impact

**Before Fix:**
- Fire and other environmental damage could be blocked by invulnerability frames
- Players could briefly become immune to fire damage after taking other damage
- Wither effect and drowning respects invulnerability incorrectly

**After Fix:**
- Rapid-fire environmental damage now bypasses invulnerability frames
- Fire spread damage is immediate
- Wither effect and drowning damage apply consistently

## Testing

Test invulnerability frame bypass:
1. Take damage, then quickly take fire damage - both should register
2. Burn a player with fire then hit them - both damage types should apply
3. Verify fire damage persists even during invulnerability frames
